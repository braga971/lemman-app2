:root{
  --bg:#f7f7fb; --card:#ffffff; --border:#e5e7eb; --text:#111827; --muted:#6b7280;
  --pill:#111; --pill-text:#fff; --accent:#3b82f6; --success:#10b981; --warn:#f59e0b;
  --chip-home:#2563eb; --chip-attivita:#0ea5e9; --chip-rapportini:#10b981; --chip-bacheca:#f59e0b;
  --chip-turni:#8b5cf6; --chip-admin:#ef4444; --chip-utenti:#14b8a6; --chip-dashboard:#22c55e; --chip-report:#e11d48; --chip-default:#6b7280;
}
*{ box-sizing:border-box }
body{ margin:0; font-family: Inter, system-ui, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--text) }
.container{ max-width:1120px; margin:0 auto; padding:16px }
.nav{ background:rgba(17,17,17,0.7); backdrop-filter:saturate(120%) blur(8px); color:#fff; padding:8px 12px; position:sticky; top:0; z-index:10; border-bottom:1px solid rgba(255,255,255,0.08) }
.nav .tabs{ display:flex; gap:8px; align-items:center }
.tab{ background:transparent; border:none; color:#fff; padding:6px 12px; border-radius:999px; cursor:pointer; transition:background .15s ease, transform .08s ease }
.tab:hover{ background:rgba(255,255,255,0.08) }
.tab:active{ transform:translateY(1px) }
.tab.active{ background:#2b2b2b }
.nav .right{ margin-left:auto }
.btn{ border:none; border-radius:10px; padding:8px 12px; cursor:pointer; transition:opacity .15s ease, transform .08s ease }
.btn:active{ transform:translateY(1px) }
.btn.primary{ background:linear-gradient(135deg, var(--accent), #7c3aed); color:#fff }
.btn.ghost{ background:#2b2b2b; color:#fff }
.card{ background:var(--card); border:1px solid var(--border); border-radius:14px; padding:14px }
.grid{ display:grid; gap:12px }
.grid2{ display:grid; grid-template-columns:1fr 1fr; gap:16px }
.section h3{ margin:0 0 10px 0 }
.table{ width:100%; border-collapse:collapse }
.table th,.table td{ padding:10px; border-bottom:1px solid var(--border); text-align:left; font-size:14px }
input, select, textarea{ border:1px solid var(--border); border-radius:10px; padding:8px 10px; font-size:14px }
input:focus, select:focus, textarea:focus{ outline:2px solid rgba(59,130,246,0.35); box-shadow:0 0 0 3px rgba(59,130,246,0.15) }
.row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap }
.badge{ font-size:12px; padding:3px 8px; border-radius:999px; background:#eef2ff; color:#111 }
.status{ border-radius:999px; padding:2px 8px; font-size:12px }
.status.green{ background:#e9fdf5; color:#047857 }
.status.yellow{ background:#fff7ed; color:#b45309 }
.status.gray{ background:#f3f4f6; color:#374151 }
.subtitle{ color:#6b7280; font-weight:600 }
hr.sep{ border:0; border-top:1px solid var(--border); margin:10px 0 }

/* Responsive (mobile-first adjustments) */
@media (max-width: 768px){
  .container{ padding:12px }
  .card{ padding:12px; border-radius:12px }
  .grid2{ grid-template-columns:1fr }
  .grid{ grid-template-columns:1fr }
  .row{ gap:6px }
  input, select, textarea{ width:100% }
  .nav .tabs{ overflow-x:auto; white-space:nowrap; -webkit-overflow-scrolling:touch }
  .tab{ padding:6px 10px }
  .table{ display:block; width:100%; overflow-x:auto }
}

@media (max-width: 480px){
  .container{ padding:10px }
  .card{ padding:10px }
  .tab{ padding:5px 8px }
  .badge{ font-size:11px }
  .table th,.table td{ padding:8px; font-size:13px }
  .admin .row label{ width:100%; margin:4px 0 2px 0 }
  .admin .row .select, .admin .row .input, .admin .row input[type=date]{ width:100% }
  .m-hide{ display:none !important }
  .admin .grid2{ grid-template-columns:1fr }
  .admin .table{ display:block; width:100%; overflow-x:auto }
  .admin select, .admin input, .admin textarea{ width:100%; max-width:100% }
  .admin .hint{ display:block; white-space:normal; line-height:1.3 }
}

/* Print helpers */
@media print {
  .no-print { display:none !important }
  body { background:#fff }
  .container { max-width:none; padding:0 }
  .nav { display:none }
}

/* Avoid page breaks inside cards when printing */
@media print {
  .card { page-break-inside: avoid }
  .container > *:not(.print-activities) { display: none !important }
  .print-activities { display:block !important; box-shadow:none; border:none }
  .print-riepilogo { display:none !important }
  .print-activities .no-print { display:none !important }
  .print-activities .card { display:block !important; width:auto; box-shadow:none; border:none; margin:6px 12px; padding:8px }
  .print-activities table { display:table !important }
  .print-activities tr[data-blank="1"] { display:none !important }
  .print-activities { font-size:10px }
  .print-activities .table th, .print-activities .table td { padding:3px; font-size:10px }
  .print-activities .muted { font-size:11px }
  @page { size: A4 portrait; margin: 8mm }
}

:root[data-theme="dark"]{ --bg:#0f1115; --card:#151821; --border:#262a36; --text:#e5e7eb; --muted:#9ca3af; --pill:#e5e7eb; --pill-text:#111; --accent:#8b5cf6; --success:#10b981; --warn:#f59e0b }
:root[data-theme="dark"] .nav{ background:rgba(11,13,18,0.7); backdrop-filter:saturate(120%) blur(8px); color:#fff }

/* Toasts */
.toast-container{ position:fixed; top:64px; right:16px; z-index:50; display:flex; flex-direction:column; gap:8px }
.toast{ background:var(--card); color:var(--text); border:1px solid var(--border); border-radius:10px; padding:10px 12px; box-shadow:0 8px 20px rgba(0,0,0,0.2); min-width:240px }

/* Search overlay */
.search-overlay{ position:fixed; inset:0; background:rgba(0,0,0,0.4); z-index:40; display:flex; align-items:flex-start; justify-content:center; padding-top:80px }
.search-panel{ background:var(--card); color:var(--text); border:1px solid var(--border); border-radius:12px; width:min(720px, 92%); max-height:70vh; overflow:auto }
.search-panel .item{ padding:10px 12px; border-bottom:1px solid var(--border); cursor:pointer }
.search-panel .item:hover{ background:rgba(0,0,0,0.04) }
:root[data-theme="dark"] .search-panel .item:hover{ background:rgba(255,255,255,0.06) }

/* Icon chips (colored circles for nav icons) */
.icon-chip{ width:22px; height:22px; border-radius:999px; display:inline-flex; align-items:center; justify-content:center; color:#fff }
.icon-chip > svg{ width:14px; height:14px }
.chip-home{ background:var(--chip-home) }
.chip-attivita{ background:var(--chip-attivita) }
.chip-rapportini{ background:var(--chip-rapportini) }
.chip-bacheca{ background:var(--chip-bacheca) }
.chip-turni{ background:var(--chip-turni) }
.chip-admin{ background:var(--chip-admin) }
.chip-utenti{ background:var(--chip-utenti) }
.chip-dashboard{ background:var(--chip-dashboard) }
.chip-report{ background:var(--chip-report) }
.chip-default{ background:var(--chip-default) }

/* Dropdown menu item hover */
.menu-item:hover{ background:rgba(0,0,0,0.04) }
:root[data-theme="dark"] .menu-item:hover{ background:rgba(255,255,255,0.06) }

/* Drawer menu (mobile) */
.drawer-overlay{ position:fixed; inset:0; background:rgba(0,0,0,0.35); z-index:45; opacity:0; animation: fadeIn .18s ease forwards }
.drawer-panel{ position:fixed; top:0; left:0; bottom:0; width:min(76%, 320px); background:var(--card); color:var(--text); border-right:1px solid var(--border); z-index:50; transform:translateX(-100%); transition:transform .2s ease }
.drawer-panel.open{ transform:translateX(0) }

/* Desktop dropdown */
.menu-dropdown{ position:absolute; top:36px; left:0; background:var(--card); color:var(--text); border:1px solid var(--border); border-radius:10px; min-width:220px; box-shadow:0 10px 24px rgba(0,0,0,0.2); z-index:20; opacity:0; transform:translateY(-6px); animation: dropdownIn .16s ease forwards }

@keyframes fadeIn { from { opacity:0 } to { opacity:1 } }
@keyframes dropdownIn { from { opacity:0; transform:translateY(-6px) } to { opacity:1; transform:translateY(0) } }
